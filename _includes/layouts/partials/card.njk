{% set mainTag = '' %}
{% if card.data.mainTag %}
  {% set mainTag = 'c-card--' + card.data.mainTag %}
{% endif %}


{% set modifiers = '' %}
{% if card.modifiers %}
  {% for mod in card.modifiers %}
    {% set modifiers = modifiers + ' c-card--'+mod %}
  {% endfor %}
{% endif %}

<article class="c-card {{ modifiers }} {{ mainTag }}">
  {% if card.hasImg and card.data.mainTag %}
    <div class="c-card__img-wrapper">
      {# check if SVG exists, otherwise 11ty build explodes! #}
      {% if card.data.mainTag in ['git', 'vuejs', 'js', 'vsc', 'css', 'nodejs', 'design-system', 'static-site-generator', 'markdown', 'mac-os', 'template-engine'] %}
        {% include '../../../svg/' + card.data.mainTag + '.svg' %}
      {% endif %}
    </div>
  {% endif %}
  <div class="c-card__content">
    {% if card.number %}
    <span class="c-card__number">#{{ card.number }}</span>
    {% endif %}
    {# title and link #}
    {% if card.data.externalUrl %}
      {% set cardUrl = card.data.externalUrl %}
    {% else %}
      {% set cardUrl = entry.url | url %}
    {% endif %}
    <a class="c-card__title" href="{{ cardUrl }}" {% if card.data.externalUrl %}target="_blank"{% endif %}>
      <h2 class="c-card__title-heading">{{ card.data.title }}</h2>
    </a>

    {# abstract #}
    {% if not card.isExpanded %}
      <p class="c-card__abstract">{{ card.data.abstract }}</p>
    {% endif %}

    {# content #}
    {% if card.isExpanded %}
      <div class="c-card__raw-content">
        {{ entry.templateContent | safe }}
      </div>
    {% endif %}

    {# bottom info #}
    <div class="c-card__bottom">
      {# {% if card.data.date %} #}
      {% set articleDate = card.data.date or page.date %}
      <time class="c-card__date" datetime="{{ articleDate | htmlDateString }}">{{ articleDate | htmlDateString('human-readable') }}</time>
      {# {% endif %} #}
      <div class="c-card__tags">
        {% for tag in card.data.tags %}
          {% set tagUrl %}/tags/{{ tag }}/{% endset %}
          <a href="{{ tagUrl | url }}" class="c-label">{{ tag }}</a>
        {% endfor %}
      </div>
    </div>
  </div>
</article>
